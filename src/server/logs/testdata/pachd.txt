&map[app:pachd container:pachd filename:/var/log/pods/default_pachd-59bbd54f97-vxb8d_7a3cbbfb-f6ec-44d3-80b5-8fea99daba57/pachd/0.log job:default/pachd namespace:default node_name:pach-control-plane pod:pachd-59bbd54f97-vxb8d pod_template_hash:59bbd54f97 stream:stderr suite:pachyderm]
{"severity":"debug","time":"2024-05-01T17:39:22.453629744Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:22.453654845Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:22.453682545Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:22.453703846Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:22.453929051Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000194204,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:22.454250259Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000285607,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:22.454611668Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.time":0.000304808,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:22.455317085Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000648316,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:22.455818197Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000459211,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:22.456476912Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.time":0.000614414,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:39:22.457156729Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000636416,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:22.457574339Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000378009,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:22.458422459Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000796819}
{"severity":"debug","time":"2024-05-01T17:39:22.459212178Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.time":0.000749318,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:39:22.460042298Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000789719}
{"severity":"debug","time":"2024-05-01T17:39:22.460661913Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000573314,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:22.461709138Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263210,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001005024,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:22.462101247Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000346308,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:22.462142848Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008416401,"xact_id":263210,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:22.462487657Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000314407}
{"severity":"debug","time":"2024-05-01T17:39:22.464413003Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001818344,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:22.464944015Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:22.464991417Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:24.454141798Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:24.4541975Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:24.4542137Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:24.454241501Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:24.45462161Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000357208,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.45504232Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000373109,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:24.455371828Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000271007,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.456088345Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000666216}
{"severity":"debug","time":"2024-05-01T17:39:24.456539756Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000406709}
{"severity":"debug","time":"2024-05-01T17:39:24.457201872Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000617414,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.457895788Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000646815,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:39:24.458248997Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000311108,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.45881321Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000515312,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.459561128Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000704417,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.460233844Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000598514,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:24.460863659Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000581814,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.462028087Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263211,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001119527,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.462377796Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000302307,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.462417797Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008169796,"xact_id":263211,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:24.462843307Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.00039241,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:24.464753353Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001800544,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:24.465290365Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:24.465334566Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:26.457249114Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002263054,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:26.458803552Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000633115}
{"severity":"debug","time":"2024-05-01T17:39:26.458904654Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:26.458921654Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:26.458932055Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:26.458951155Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:26.459277863Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000293407,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:26.459640872Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000320907}
{"severity":"debug","time":"2024-05-01T17:39:26.460027481Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000314508,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:26.460787699Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.time":0.000689416,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"]}
{"severity":"debug","time":"2024-05-01T17:39:26.461308812Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000479012,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:26.462215633Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.00085992,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:39:26.463222758Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000947022,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:26.463643868Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.time":0.000372709,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1]}
{"severity":"debug","time":"2024-05-01T17:39:26.464416486Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.time":0.000721117,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"]}
{"severity":"debug","time":"2024-05-01T17:39:26.465290407Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.00083052,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:26.466019225Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000687516,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:26.466624539Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000555813,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:26.467773167Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263212,"pid":752941,"pgx.severity":"info","pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001104427}
{"severity":"debug","time":"2024-05-01T17:39:26.468099674Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000281406,"pgx.commandTag":"ROLLBACK"}
{"severity":"debug","time":"2024-05-01T17:39:26.468144276Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.00917022,"xact_id":263212,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:26.468471483Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000290707,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:26.470505032Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001929746,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:26.471051045Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:26.471104246Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:26.992342841Z","caller":"proc/proc.go:188","message":"meter: self_wchar_bytes","type":"int","value":10134440,"meter":"self_wchar_bytes"}
{"severity":"debug","time":"2024-05-01T17:39:28.459324606Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:28.459374307Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:28.459389607Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:28.459415308Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:28.459759016Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000320708,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable"}
{"severity":"debug","time":"2024-05-01T17:39:28.460152126Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000340408,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:28.460558135Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000314307,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:28.461293253Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000672416,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:28.461761664Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.time":0.00042501,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:39:28.462482882Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.args":[6,1000,10000],"pgx.time":0.000673516,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:39:28.463105196Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000578614,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:28.463490506Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.time":0.000331508,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:39:28.46410582Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000564513,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:28.464793137Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.time":0.000646116,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:39:28.465517654Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.time":0.000643516,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:39:28.46618927Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000560913,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:28.467268896Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263213,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001030025,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:28.467638405Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000319608,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback"}
{"severity":"debug","time":"2024-05-01T17:39:28.467678006Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008256298,"xact_id":263213,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:28.468091316Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000379709,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:39:28.470531474Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.002298355,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:28.471093188Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:28.471137289Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:30.461896209Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001893345,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:30.463451346Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000546813,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.463538749Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:30.463570949Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:30.46358415Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:30.46361785Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:30.463859556Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000224305,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.464204164Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000293707,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.464562273Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000284707,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.465296391Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000647516,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.466049609Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000705917,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:30.466751726Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000653915,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.467881453Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000964324,"pgx.rowCount":4}
{"severity":"debug","time":"2024-05-01T17:39:30.468374164Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.00044481,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.469585693Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.001152627,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.47070692Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.001075026,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.471481439Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000727018}
{"severity":"debug","time":"2024-05-01T17:39:30.472098254Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000570114}
{"severity":"debug","time":"2024-05-01T17:39:30.47317778Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263214,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001017224,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.473802795Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000573413,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.473856096Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.010228845,"xact_id":263214,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:30.474190104Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000294307,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:30.476159351Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001844444,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:30.476669963Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:30.476711964Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:30.667897047Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["086eb2ac-d6d0-1b28-a33e-1a18fc60d05f"],"pgx.severity":"info","pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;","pgx.args":[1],"pgx.time":0.00043121,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.464472213Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:32.464526914Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:32.464541914Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:32.464584615Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:32.464932324Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000306007,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:32.465329733Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000339808}
{"severity":"debug","time":"2024-05-01T17:39:32.465790044Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000371309,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:32.466609864Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000758818,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.467140977Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000487611,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.467870994Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000651716,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.46854861Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000635515,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.468978821Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000389809,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:32.469685338Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000655215}
{"severity":"debug","time":"2024-05-01T17:39:32.470447356Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000705217}
{"severity":"debug","time":"2024-05-01T17:39:32.471333877Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000805919,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.472015593Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000631015,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.47313052Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263215,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001068926,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.473507729Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000309207,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.47354833Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008938314,"xact_id":263215,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:32.473882038Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000300007,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:32.475890886Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001894645,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:32.476492701Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:32.476540902Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:34.467410525Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002024049,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:34.468966562Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000569514,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.469047964Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:34.469061864Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:34.469086665Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:34.469107365Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:34.469377472Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000234106,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.469693479Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000279306,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.470021387Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000271406,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.470683503Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000614015,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.471120014Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000391909,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:34.471994535Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.000829119,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:39:34.472790154Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.time":0.000743318,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:39:34.473152062Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000319707,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:34.473832779Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000622515,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.474598597Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000722517,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.475309714Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000668616}
{"severity":"debug","time":"2024-05-01T17:39:34.475952429Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000591514,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.476927853Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263216,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000932223,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.477253261Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000278206,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:34.477298562Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008165196,"xact_id":263216,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:34.47763417Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000303408,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:39:34.479335311Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001594039,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:34.479904524Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:34.479949125Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:36.469680521Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:36.469730622Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:36.469745322Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:36.469770023Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:36.470130832Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000324608,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.470544942Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000330808,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:36.470936051Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000315208,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.471833072Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.00084362,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.472331684Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000452311,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.473161404Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000784519,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.473891022Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000669016}
{"severity":"debug","time":"2024-05-01T17:39:36.474330232Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000382209,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.475023849Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000643416,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.475845369Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000776018,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.476617287Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000700717,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.477226102Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000558614,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:36.478341928Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263217,"pid":752941,"pgx.severity":"info","pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001071225}
{"severity":"debug","time":"2024-05-01T17:39:36.478723338Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000316207,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback"}
{"severity":"debug","time":"2024-05-01T17:39:36.478762339Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008984015,"xact_id":263217,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:36.479135447Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.time":0.000341208,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"]}
{"severity":"debug","time":"2024-05-01T17:39:36.481883013Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.002633263,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:36.482523129Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:36.48258443Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:38.47290314Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002133951,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:38.474414076Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000514413,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.474513278Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:38.474544479Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:38.47457308Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:38.47459588Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:38.474890387Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000263706,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:38.475159894Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000218905,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.475532303Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000317808,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.47624832Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000668916,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.476874735Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000584914,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:38.477595852Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000676616,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:38.478282969Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000626015,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.478655778Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000310607,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:38.479276093Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000570213,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.48002441Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.time":0.000704817,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:39:38.480745028Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000679717,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.481382043Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000590514}
{"severity":"debug","time":"2024-05-01T17:39:38.482387767Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263218,"pid":752941,"pgx.severity":"info","pgx.time":0.000939623,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000]}
{"severity":"debug","time":"2024-05-01T17:39:38.482672374Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000238806,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.482715275Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008096794,"xact_id":263218,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:38.483000882Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000254306,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:38.484893527Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001790043,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:38.485554743Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:38.485618245Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:40.475398041Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:40.475448342Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:40.475463243Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:40.475487843Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:40.475857052Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000347008,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable"}
{"severity":"debug","time":"2024-05-01T17:39:40.47619586Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000286407,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.476558969Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000271907,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.47741799Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.00080082,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.478028404Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000510412}
{"severity":"debug","time":"2024-05-01T17:39:40.478780622Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000703517,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.47950324Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.args":[6,1000,10000],"pgx.time":0.000662816,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:39:40.479887349Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000330508,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.480539264Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000603514,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.481331383Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000710517,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.482509512Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.001101327,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:40.483163427Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000600014,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.484290854Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263219,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001083926,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.484649063Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000299207,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:40.484692264Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.00919782,"xact_id":263219,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:40.485062173Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000334608,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:40.48701332Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001838444,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:40.487622734Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:40.487672535Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:40.669178486Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["db711d4e-83f7-1267-8233-acfbf385c82f"],"pgx.severity":"info","pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;","pgx.args":[1],"pgx.time":0.000496612,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.478437156Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001946547,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:42.479941092Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.time":0.000502412,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:42.480025494Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:42.480040294Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:42.480065695Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:42.480087995Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:42.480398203Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000263406,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.480765112Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000329307,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:42.481078419Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000254506}
{"severity":"debug","time":"2024-05-01T17:39:42.481892739Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000742618,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:42.482455152Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000515212,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.48319857Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.time":0.000697817,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:39:42.484077691Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.00083462}
{"severity":"debug","time":"2024-05-01T17:39:42.484498701Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000378909,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.485153017Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000603815,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.485991137Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000797519,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.486679153Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000645115,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.487417871Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000690017,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.488530998Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263220,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001068626,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.488909307Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000328008,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.488963508Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008852412,"xact_id":263220,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:42.489316717Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000309807,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:42.491179761Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001717841,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:42.491718174Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:42.491809276Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:44.481109162Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:44.481157263Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:44.481171663Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:44.481196764Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:44.481616574Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000394309,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:44.481980982Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000314007,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()"}
{"severity":"debug","time":"2024-05-01T17:39:44.482370992Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000331908,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:44.48311521Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000693717}
{"severity":"debug","time":"2024-05-01T17:39:44.483628122Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000472012,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:44.484301338Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000629315,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:44.484940753Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000579114,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:39:44.485273761Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000288907}
{"severity":"debug","time":"2024-05-01T17:39:44.485886176Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000564714,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:44.486575093Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000643215,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1"}
{"severity":"debug","time":"2024-05-01T17:39:44.487255209Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000608715,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:39:44.488061628Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000759818,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:44.489223556Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263221,"pid":752941,"pgx.severity":"info","pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001103627}
{"severity":"debug","time":"2024-05-01T17:39:44.489593265Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000322408,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback"}
{"severity":"debug","time":"2024-05-01T17:39:44.489633966Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008428302,"xact_id":263221,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:44.489980174Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000313507,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:44.49190732Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001817043,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:44.492475834Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:44.492518635Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:46.48432538Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002040449,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:46.485887618Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000571614,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:46.48598952Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:46.486020721Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:46.486048422Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:46.486071922Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:46.486377029Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000272906}
{"severity":"debug","time":"2024-05-01T17:39:46.486725238Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000308408,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:46.487075346Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000286507,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:46.487780063Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.args":["default","edges","spec","master"],"pgx.time":0.000656316,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4"}
{"severity":"debug","time":"2024-05-01T17:39:46.488297476Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000472711,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:46.489132596Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000791619,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:46.490186321Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.001007024,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:39:46.490597331Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000358008,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:46.491302748Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000651315,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:46.492289371Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000905022}
{"severity":"debug","time":"2024-05-01T17:39:46.493195693Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000859121,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:46.493938011Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000694717,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:46.494996736Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263222,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001009024,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:39:46.495371945Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000328708,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:46.495417646Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.009322423,"xact_id":263222,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:46.495760154Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000308907,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:39:46.4976614Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001794843,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:46.498327416Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:46.498377317Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:48.486577476Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:48.486630477Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:48.486645078Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:48.486669778Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:48.487078388Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000362409,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.487415096Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000291707,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()"}
{"severity":"debug","time":"2024-05-01T17:39:48.487678602Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000206705,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp"}
{"severity":"debug","time":"2024-05-01T17:39:48.488385419Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000651615,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.48881443Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.00038641,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.489527347Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000668316,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.490413368Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.00084012,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.490805477Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.time":0.000351208,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:39:48.491396592Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000543613,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.492126809Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000689117,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.492799725Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000604114,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.493387739Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.time":0.000538613,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:39:48.494482865Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263223,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001029224,"pgx.rowCount":10}
{"severity":"debug","time":"2024-05-01T17:39:48.494893875Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000363809,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:48.494934176Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008236097,"xact_id":263223,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:48.495306885Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000339208,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:39:48.497705943Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.002290055,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:48.498262156Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:48.498304857Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:50.489270482Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001721641,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:50.490976923Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000656816,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.491063325Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:50.491080526Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:50.491090726Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:50.491112326Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:50.491463435Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000310608,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.491837144Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000314808,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.492144751Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000241506,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.492851068Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.time":0.000657016,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"]}
{"severity":"debug","time":"2024-05-01T17:39:50.493327579Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.00043281,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.494013596Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000641916,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.494669012Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.000612415,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:39:50.495060821Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000348908,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:50.495935342Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.00082282,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:50.496769962Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000791419,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:50.497457578Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000631915,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.498093494Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000585514,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:50.499122618Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263224,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000986023,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.499437426Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000267707,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:50.499486627Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.00835,"xact_id":263224,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:50.499823035Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000302507}
{"severity":"debug","time":"2024-05-01T17:39:50.501660679Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001729641,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:50.502229993Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:50.502275494Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:50.671407048Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["4df49498-64f4-13bd-830a-573dfd8248c2"],"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;","pgx.args":[1],"pgx.time":0.000528113}
{"severity":"debug","time":"2024-05-01T17:39:52.491984689Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:52.492050991Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:52.492065791Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:52.492091792Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:52.492499801Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000387509}
{"severity":"debug","time":"2024-05-01T17:39:52.492887911Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000338609,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.493203218Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000258906,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp"}
{"severity":"debug","time":"2024-05-01T17:39:52.49409384Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.time":0.00083352,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"]}
{"severity":"debug","time":"2024-05-01T17:39:52.494751155Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000585014,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.495527874Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000721218,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.496227291Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000636215,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.496659801Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000390809,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.497312517Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000593315,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.498237339Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.time":0.000869421,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:39:52.498963356Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000661816,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.499616372Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000606815,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.500879702Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263225,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001206029,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.501236511Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000310608,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:52.501276112Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.00917842,"xact_id":263225,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:52.501644621Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000335208,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:39:52.50369077Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001938647,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:52.504200682Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:52.504247983Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:54.494579493Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001876745,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:54.496016727Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000502812,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.496088429Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:54.49611823Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:54.49612923Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:54.496163931Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:54.496489039Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000296707,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:54.496838747Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000280807,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.497188255Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.time":0.000294007,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:54.497895972Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.args":["default","edges","spec","master"],"pgx.time":0.000661216,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4"}
{"severity":"debug","time":"2024-05-01T17:39:54.498372984Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000434911,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.499010099Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000593614,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.499713216Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000658216,"pgx.rowCount":4}
{"severity":"debug","time":"2024-05-01T17:39:54.500053724Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000301007,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.500853543Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.time":0.000741418,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"]}
{"severity":"debug","time":"2024-05-01T17:39:54.501739465Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.00081892,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.502612385Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.00082852,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.503266501Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000606415,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:39:54.504256825Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263226,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000946423,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:39:54.504559632Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000257706,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.504619034Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008445302,"xact_id":263226,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:54.504971442Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000318308,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:54.506682883Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001611939,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:54.507253197Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:54.507302298Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:56.496420879Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:56.49647628Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:56.496508781Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:56.496541382Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:56.496976792Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.00039151,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable"}
{"severity":"debug","time":"2024-05-01T17:39:56.497395302Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000374609}
{"severity":"debug","time":"2024-05-01T17:39:56.497791912Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000313307,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:56.498694633Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.00081612,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:56.499240546Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000494812}
{"severity":"debug","time":"2024-05-01T17:39:56.500085367Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000790419,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:56.500933387Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000800819,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:56.501383898Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000400909,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:56.502119815Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.time":0.000672016,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"]}
{"severity":"debug","time":"2024-05-01T17:39:56.503026137Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000857721,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:56.503919758Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.time":0.000819819,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:39:56.504623675Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000654915,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:56.505895606Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263227,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001201829,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:56.506293015Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000345908,"pgx.commandTag":"ROLLBACK"}
{"severity":"debug","time":"2024-05-01T17:39:56.506336116Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.009769134,"xact_id":263227,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:56.506797527Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000411709,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:56.50900658Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.00209795,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:56.509603395Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:39:56.509673696Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:39:58.499846603Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002326855,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:58.501324438Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.time":0.000521713,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:58.50139774Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:58.50141204Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:58.501461941Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:58.501482842Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:39:58.501734348Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000219606,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:39:58.501983054Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000215406,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()"}
{"severity":"debug","time":"2024-05-01T17:39:58.50224896Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000213705,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:58.502889275Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000594614,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:58.503332686Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.00040051,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:58.503972701Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.000596014,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:39:58.504606717Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000590415,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:58.504931524Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000283907,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:58.505633141Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000654916,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:58.506596864Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000924022,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:58.50724888Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.time":0.000611215,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:39:58.507832794Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000535613,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t"}
{"severity":"debug","time":"2024-05-01T17:39:58.508815118Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263228,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000940522,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:39:58.509120125Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000259907,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback"}
{"severity":"debug","time":"2024-05-01T17:39:58.509164226Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.007659484,"xact_id":263228,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:39:58.509591036Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000375909,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:39:58.511527183Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001835844,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:39:58.512279701Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:39:58.512326702Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:00.502278603Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:00.502328704Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:00.502344404Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:00.502368805Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:00.502740514Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000347908,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.503127923Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000328307,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:00.50340773Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000219105,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.504161248Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.args":["default","montage","spec","master"],"pgx.time":0.000697317,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4"}
{"severity":"debug","time":"2024-05-01T17:40:00.504651359Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.00043301,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.505574682Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.00083022,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.506421002Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000794319,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.506831412Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000369009,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:00.507547529Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000663716,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1"}
{"severity":"debug","time":"2024-05-01T17:40:00.508287047Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000680616,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.509151167Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000789019,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.509817183Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000616915,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.511001612Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263229,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001142027,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.511374621Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000325107,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:00.511416522Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.009041217,"xact_id":263229,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:00.51178913Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000340008,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:00.513683376Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001784543,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:00.514446194Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:00.514494295Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:00.670583437Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["f511c99e-b686-18a6-a010-3223c96cf3b8"],"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000436511,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;"}
{"severity":"debug","time":"2024-05-01T17:40:02.505240015Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001871745,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:02.506901555Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000612715,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:02.506992357Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:02.507007558Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:02.507015358Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:02.507035958Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:02.507356466Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000287107,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable"}
{"severity":"debug","time":"2024-05-01T17:40:02.507707874Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000293007,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:02.508104184Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000324508,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:02.508926204Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000744417,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:02.509492917Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000523213,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:02.510159933Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.time":0.000606115,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:02.511034454Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.00083062,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:02.511400963Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000325108,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:02.512057279Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000606115,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1"}
{"severity":"debug","time":"2024-05-01T17:40:02.512853798Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000754618,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:02.513640717Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000744617,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:40:02.514278632Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000590814,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:02.515279056Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263230,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000956723,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:02.515615364Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000289707,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback"}
{"severity":"debug","time":"2024-05-01T17:40:02.515658565Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008599606,"xact_id":263230,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:02.516022774Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000331708,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:02.51797412Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001849444,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:02.518440932Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:02.518489833Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:04.507217404Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:04.507267405Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:04.507282706Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:04.507307706Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:04.507667615Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000325208,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable"}
{"severity":"debug","time":"2024-05-01T17:40:04.508089125Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000353708,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:04.508463734Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.time":0.000299607,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:04.509190652Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000643615}
{"severity":"debug","time":"2024-05-01T17:40:04.509689964Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.00045631,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:04.510350079Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.time":0.000612714,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:04.510957094Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.args":[6,1000,10000],"pgx.time":0.000564314,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:04.511342103Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.time":0.000344708,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:40:04.512152423Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.time":0.000765419,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"]}
{"severity":"debug","time":"2024-05-01T17:40:04.51287654Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000683517,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:04.513553156Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000607715,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:40:04.514261273Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000661316,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:04.515466802Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263231,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001161528,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:04.51578941Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000275807,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:04.515827411Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008509604,"xact_id":263231,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:04.516175019Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000314908,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:40:04.517962362Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.00167714,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:04.518586177Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:04.518628678Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:06.509716406Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.00208315,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:06.511397146Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000520312,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.511490148Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:06.511523049Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:06.511534149Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:06.51156785Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:06.511860957Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000260106,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:06.512163265Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000265306,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:06.512501373Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000284507,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.51322699Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000676116,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.513726402Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000457711,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.514402318Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.time":0.000631115,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:06.515132036Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.time":0.000685217,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:06.515616447Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.00042701,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.516236762Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000569814,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.517151984Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000863421,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.517883902Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000693217,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.518513517Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000578114,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.51948574Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263232,"pid":752941,"pgx.severity":"info","pgx.args":[24,1,10000],"pgx.time":0.000930622,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3"}
{"severity":"debug","time":"2024-05-01T17:40:06.519816048Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000285507,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:06.519859549Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008266798,"xact_id":263232,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:06.520212557Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000320907,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:40:06.522196005Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001885945,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:06.522786019Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:06.52283682Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:08.51231101Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:08.512364811Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:08.512380611Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:08.512406012Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:08.512785721Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000358709,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:08.513125329Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000296607,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()"}
{"severity":"debug","time":"2024-05-01T17:40:08.513467737Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000284406}
{"severity":"debug","time":"2024-05-01T17:40:08.514139954Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000622515,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:08.514602165Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000420911,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:08.515301881Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.args":[6,1000,10000],"pgx.time":0.000656315,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:08.515973498Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.args":[6,1000,10000],"pgx.time":0.000621414,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:08.516312906Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000298508,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:08.516931621Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.time":0.000571413,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"]}
{"severity":"debug","time":"2024-05-01T17:40:08.517669138Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000679516,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:08.518337154Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.time":0.000600114,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:40:08.51898877Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.time":0.000603315,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:40:08.520036295Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263233,"pid":752941,"pgx.severity":"info","pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001005024}
{"severity":"debug","time":"2024-05-01T17:40:08.520356403Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000271106,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:08.520396404Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.007984592,"xact_id":263233,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:08.520694611Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000265107,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:08.522915464Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.002111451,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:08.523607181Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:08.523664382Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:10.5143554Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001884845,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:10.515809635Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000494012,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.515897937Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:10.515927938Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:10.515939738Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:10.515973939Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:10.516247646Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000239406,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.516601154Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000248406,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.51685776Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000198304,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:10.517530777Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000624714,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.517983787Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.time":0.000400509,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1]}
{"severity":"debug","time":"2024-05-01T17:40:10.518612603Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000585214,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.519559325Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000882121,"pgx.rowCount":4}
{"severity":"debug","time":"2024-05-01T17:40:10.519951935Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000351109,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.520617551Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000615414,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1"}
{"severity":"debug","time":"2024-05-01T17:40:10.521339668Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000682317,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.521983283Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000604114,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:40:10.522571197Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.time":0.000539313,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:40:10.523572421Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263234,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000958223,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.523878429Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000255107,"pgx.commandTag":"ROLLBACK"}
{"severity":"debug","time":"2024-05-01T17:40:10.52392253Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.00792309,"xact_id":263234,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:10.524245938Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000291207,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:10.526131083Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001787643,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:10.526634295Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:10.526676996Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:10.671450566Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["dfddeed0-23e9-1da1-87a8-263d5d7a294a"],"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;","pgx.args":[1],"pgx.time":0.000438811}
{"severity":"debug","time":"2024-05-01T17:40:12.516893003Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:12.516945704Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:12.516960705Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:12.516984205Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:12.517312413Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000305008,"pgx.commandTag":"BEGIN"}
{"severity":"debug","time":"2024-05-01T17:40:12.517705422Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000348508,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:12.518096132Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000331408,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:12.51883785Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.args":["default","montage","spec","master"],"pgx.time":0.000692917,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4"}
{"severity":"debug","time":"2024-05-01T17:40:12.519319561Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.00041001,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:12.520134281Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.time":0.000769419,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:12.520888799Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000710517}
{"severity":"debug","time":"2024-05-01T17:40:12.521246207Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000315407,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:12.521894923Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.time":0.000600415,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"]}
{"severity":"debug","time":"2024-05-01T17:40:12.522582039Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000644015,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:12.523347058Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000696317,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:12.524104676Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000709117,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:12.525256503Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263235,"pid":752941,"pgx.severity":"info","pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001109726}
{"severity":"debug","time":"2024-05-01T17:40:12.525798116Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000491611,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:12.525837317Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008846712,"xact_id":263235,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:12.526230227Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000339208,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:12.528329877Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001992648,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:12.528834889Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:12.528888691Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:12.741499287Z","caller":"server/pachw.go:111","message":"scaling pachw","user":"internal:pachw-controller","withLock":"pachyderm/1.7.0/pachw-controller-lock","locked":true,"replicas":0}
{"severity":"debug","time":"2024-05-01T17:40:12.74453096Z","logger":"outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","user":"internal:pachw-controller","withLock":"pachyderm/1.7.0/pachw-controller-lock","locked":true,"name":"kubernetes","method":"PUT","uri":"https://10.96.0.1:443/apis/apps/v1/namespaces/default/deployments/pachw/scale?fieldManager=pachw-controller","duration":0.00290207,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:12.744624462Z","caller":"server/pachw.go:138","message":"scaled pachw ok","user":"internal:pachw-controller","withLock":"pachyderm/1.7.0/pachw-controller-lock","locked":true,"replicas":0,"observedReplicas":0}
{"severity":"debug","time":"2024-05-01T17:40:14.519260601Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001949546,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:14.520632234Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000502812,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000"}
{"severity":"debug","time":"2024-05-01T17:40:14.520705036Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:14.520719336Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:14.520728537Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:14.520744837Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:14.521069445Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000294307,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:14.521366452Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000259806,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()"}
{"severity":"debug","time":"2024-05-01T17:40:14.521660959Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000241806,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp"}
{"severity":"debug","time":"2024-05-01T17:40:14.522333675Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000624215,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:14.522770686Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000395209,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:14.5233903Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.time":0.000562013,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:14.524074517Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.000640216,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:14.524419925Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000305507,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:14.52503834Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000569314,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1"}
{"severity":"debug","time":"2024-05-01T17:40:14.525834459Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000753518,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1"}
{"severity":"debug","time":"2024-05-01T17:40:14.526522876Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000644915,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:14.527158591Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000565613,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:14.528167415Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263236,"pid":752941,"pgx.severity":"info","pgx.time":0.000964623,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000]}
{"severity":"debug","time":"2024-05-01T17:40:14.528474022Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000259806}
{"severity":"debug","time":"2024-05-01T17:40:14.528534524Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.007768587,"xact_id":263236,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:14.528897832Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.time":0.000327307,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"]}
{"severity":"debug","time":"2024-05-01T17:40:14.530830179Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001823244,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:14.531448994Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:14.531503895Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:16.521028585Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:16.521075587Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:16.521090087Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:16.521114588Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:16.521495797Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000355109,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:16.521871806Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000331708,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:16.522165213Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000237006,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:16.52288483Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000661516,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:16.523387242Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000460311}
{"severity":"debug","time":"2024-05-01T17:40:16.524203462Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000770118,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:16.524908779Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.args":[6,1000,10000],"pgx.time":0.000660115,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:16.525344289Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000367509,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:16.526014705Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000620715,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:16.526887826Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.00082902,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:16.527729546Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000772018,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:16.528465264Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000686817,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:16.529731294Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263237,"pid":752941,"pgx.severity":"info","pgx.time":0.001212429,"pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000]}
{"severity":"debug","time":"2024-05-01T17:40:16.530143104Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000328008,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:16.530189905Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.009063917,"xact_id":263237,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:16.530558714Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000334108,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:16.532677065Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.002003748,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:16.533498284Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:16.533567386Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:18.019324201Z","logger":"serve","caller":"log/loggers.go:346","message":"dropped health check logs","n":36}
{"severity":"debug","time":"2024-05-01T17:40:18.026446872Z","logger":"pfs-master.chunk-gc.RunOnce","caller":"chunk/gc.go:52","message":"RunOnce: span start","user":"internal:pfs-master","withLock":"pachyderm/1.7.0/pachyderm_pfs/pfs-master-lock/chunk-gc","locked":true}
{"severity":"debug","time":"2024-05-01T17:40:18.026914783Z","logger":"pfs-master.chunk-gc.RunOnce.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","user":"internal:pfs-master","withLock":"pachyderm/1.7.0/pachyderm_pfs/pfs-master-lock/chunk-gc","locked":true,"pgx.severity":"info","pgx.sql":"\n\tSELECT chunk_id, gen, uploaded FROM storage.chunk_objects\n\tWHERE tombstone = true\n\t","pgx.args":[],"pgx.time":0.00040841,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.026961084Z","logger":"pfs-master.chunk-gc.RunOnce","caller":"chunk/gc.go:78","message":"RunOnce: span finished ok","user":"internal:pfs-master","withLock":"pachyderm/1.7.0/pachyderm_pfs/pfs-master-lock/chunk-gc","locked":true,"spanDuration":0.000484312}
{"severity":"debug","time":"2024-05-01T17:40:18.031285188Z","logger":"pfs-master.storage-gc.RunOnce","caller":"track/gc.go:81","message":"RunOnce: span start","user":"internal:pfs-master","withLock":"pachyderm/1.7.0/pachyderm_pfs/pfs-master-lock/storage-gc","locked":true}
{"severity":"debug","time":"2024-05-01T17:40:18.031740599Z","logger":"pfs-master.storage-gc.RunOnce.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","user":"internal:pfs-master","withLock":"pachyderm/1.7.0/pachyderm_pfs/pfs-master-lock/storage-gc","locked":true,"pgx.severity":"info","pgx.sql":"SELECT str_id FROM storage.tracker_objects as objs\n\t\tWHERE NOT EXISTS (SELECT 1 FROM storage.tracker_refs as refs where objs.int_id = refs.to_id)\n\t\tAND expires_at <= CURRENT_TIMESTAMP LIMIT 10000","pgx.args":[],"pgx.time":0.00040881,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.031778399Z","logger":"pfs-master.storage-gc.RunOnce","caller":"track/gc.go:91","message":"RunOnce: span finished ok","user":"internal:pfs-master","withLock":"pachyderm/1.7.0/pachyderm_pfs/pfs-master-lock/storage-gc","locked":true,"spanDuration":0.000467211,"n":0}
{"severity":"debug","time":"2024-05-01T17:40:18.523878596Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002322855,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:18.525471034Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000491512,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.525547836Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:18.525562136Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:18.525570336Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:18.525605737Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:18.525924345Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000284906,"pgx.commandTag":"BEGIN"}
{"severity":"debug","time":"2024-05-01T17:40:18.526222152Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000259407,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.526538059Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000261106,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp"}
{"severity":"debug","time":"2024-05-01T17:40:18.527186675Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000600915,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.52781189Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000582914,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:18.528508706Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000640815,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.529374727Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.00081992,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:18.529880939Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000457511,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:18.530535355Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000593414,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:18.531342374Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000766918,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.532044491Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000660116}
{"severity":"debug","time":"2024-05-01T17:40:18.532641206Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000547613,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.533808834Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263238,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001119026,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.534219243Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000363508,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:18.534264244Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008634307,"xact_id":263238,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:18.534576752Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000278607,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:40:18.536453197Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001746342,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:18.53698901Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:18.537034911Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:20.5264858Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:20.526535401Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:20.526551201Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:20.526576202Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:20.52693111Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000323408,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.52734402Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000341108,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:20.527696329Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000273707,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.528372245Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000600815,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.528878757Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000461311,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:20.529597974Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000666116,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.530512396Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000862921,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.530943507Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000389309,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:20.531621223Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000628415,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.532425942Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000762618,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.533231661Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000745218,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.533835976Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000555814}
{"severity":"debug","time":"2024-05-01T17:40:20.534945702Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263239,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001068525,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.53525861Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000266607,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:20.535298411Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008715009,"xact_id":263239,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:20.535612518Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000282206,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:20.537681968Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001945647,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:20.538224781Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:20.538265382Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:20.675066261Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["61d8b71b-7223-1d31-b389-b7b82f72860d"],"pgx.severity":"info","pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;","pgx.args":[1],"pgx.time":0.00040511,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.529395511Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001923546,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:22.530790745Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000485711,"pgx.rowCount":4}
{"severity":"debug","time":"2024-05-01T17:40:22.530865546Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:22.530879547Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:22.530886347Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:22.530905647Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:22.531258756Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000322908,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.531589864Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000291007,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.531959873Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000308907,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.532820993Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000772418,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.533396807Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000528013,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:22.534097724Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000618015,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.534937444Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000780819}
{"severity":"debug","time":"2024-05-01T17:40:22.535343454Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000367609,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:22.536046271Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000655115,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.53687169Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000764518,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1"}
{"severity":"debug","time":"2024-05-01T17:40:22.537756312Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.00083012,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:22.538479429Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000671916,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.539730559Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263240,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001192029,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.540092968Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000312807,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.540138069Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.009210821,"xact_id":263240,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:22.540479377Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000309208,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:22.542570227Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001974848,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:22.543205642Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:22.543257843Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:24.531244497Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:24.531294898Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:24.531309199Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:24.531333799Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:24.531706408Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000350808,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.532038716Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000289307,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.532387725Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000291507,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.533152443Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000695616,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.533794258Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000599414,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.534551676Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000712917,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:24.535244893Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000648416,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:40:24.535618402Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000333408,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.536282018Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000612315,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.536977735Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000651615,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.537889156Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.00084272,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:24.538580673Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000644116,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.539617198Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263241,"pid":752941,"pgx.severity":"info","pgx.args":[6,1,10000],"pgx.time":0.000993924,"pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3"}
{"severity":"debug","time":"2024-05-01T17:40:24.539963206Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000297807,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.540002207Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008661908,"xact_id":263241,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:24.540405217Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000371709,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:24.542417565Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001908546,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:24.542957178Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:24.542997679Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:26.533349389Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001869045,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:26.534858725Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000501612,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000"}
{"severity":"debug","time":"2024-05-01T17:40:26.534945428Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:26.534961128Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:26.534986729Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:26.535019129Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:26.535339137Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000285207,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:26.535626744Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000251006}
{"severity":"debug","time":"2024-05-01T17:40:26.535954752Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000275207,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:26.536660769Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000660716}
{"severity":"debug","time":"2024-05-01T17:40:26.537175781Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.time":0.000473311,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1]}
{"severity":"debug","time":"2024-05-01T17:40:26.537869198Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000649416}
{"severity":"debug","time":"2024-05-01T17:40:26.538529013Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000617214}
{"severity":"debug","time":"2024-05-01T17:40:26.538907123Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000338808,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:26.539498437Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000545413,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:26.540303056Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000764118,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:26.541002173Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000656316,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:26.541847593Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000789219}
{"severity":"debug","time":"2024-05-01T17:40:26.54296202Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263242,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001072226,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:26.543319928Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000291007,"pgx.commandTag":"ROLLBACK"}
{"severity":"debug","time":"2024-05-01T17:40:26.54339803Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.0083519,"xact_id":263242,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:26.543761539Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000314108,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:26.545852889Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001983448,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:26.546423303Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:26.546466804Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:28.536019295Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:28.536073796Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:28.536089397Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:28.536115297Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:28.536487506Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000348608,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:28.536850915Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000318308,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:28.537134322Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000220606,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:28.537932641Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000749118,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:28.538396452Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.00041821,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:28.539102669Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.time":0.000661116,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:28.539762885Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000614915,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:40:28.540110193Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000307507,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:28.540672507Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000504312}
{"severity":"debug","time":"2024-05-01T17:40:28.541342323Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000626515,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1"}
{"severity":"debug","time":"2024-05-01T17:40:28.542256845Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000798619,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:28.54290566Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000582814,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:28.544011887Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263243,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001060225,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:28.544367795Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000306007,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:28.544412496Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008291299,"xact_id":263243,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:28.544819706Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000369009,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:28.547371867Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.002437758,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:28.548069084Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:28.548116985Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:30.538037285Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001801243,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:30.539805727Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000610814,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000"}
{"severity":"debug","time":"2024-05-01T17:40:30.53989223Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:30.53992373Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:30.539935231Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:30.539979232Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:30.540283639Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000271807}
{"severity":"debug","time":"2024-05-01T17:40:30.540563746Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000245306,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:30.540831852Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000217605,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:30.541531969Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000643716,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:30.542027881Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000452011,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:30.542667696Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000595014}
{"severity":"debug","time":"2024-05-01T17:40:30.543350612Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000637915}
{"severity":"debug","time":"2024-05-01T17:40:30.543694121Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000305708,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:30.544295435Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000557213,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:30.545029253Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000694617,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:30.54575467Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000685316,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:30.546384585Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000583714,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:30.547339008Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263244,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000912122,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:30.547679416Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000296407,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback"}
{"severity":"debug","time":"2024-05-01T17:40:30.547722517Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.007720085,"xact_id":263244,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:30.548028225Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000274206,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:30.54993747Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001808743,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:30.550467983Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:30.550512684Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:30.675982992Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["448aa645-92b3-1d5a-abac-cfb528dd5fee"],"pgx.severity":"info","pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;","pgx.args":[1],"pgx.time":0.000441411,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.540823994Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:32.540874595Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:32.540892895Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:32.540919396Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:32.541225503Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000283807,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.541734715Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000467111,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.542103724Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000312507,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.542996546Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000805919,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.54361486Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000566713,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.544380679Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000703817,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:32.545123697Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000695516,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.545525606Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000361209,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.546266424Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000690917,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1"}
{"severity":"debug","time":"2024-05-01T17:40:32.547021642Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000711217,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.547746659Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000632715}
{"severity":"debug","time":"2024-05-01T17:40:32.548432976Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000595315,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:32.549603504Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263245,"pid":752941,"pgx.severity":"info","pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001120327}
{"severity":"debug","time":"2024-05-01T17:40:32.549991213Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000338708,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:32.550029714Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.009102418,"xact_id":263245,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:32.550394923Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000334208,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:40:32.552451072Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001926546,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:32.553013586Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:32.55318129Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:34.543811507Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002005048,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:34.545354944Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.time":0.000562914,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:34.545465046Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:34.545495447Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:34.545506247Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:34.545524348Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:34.545805355Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000266207,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:34.546081461Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000239906,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:34.546395769Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000260507,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:34.547058185Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000614815,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:34.547528496Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.00041211,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:34.548181212Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000604414,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:34.548857028Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.time":0.000631015,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:34.549184536Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000286207,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:34.54979105Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000545713,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:34.550496767Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000663716,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:34.551139683Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000601814,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:40:34.551759397Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000572813}
{"severity":"debug","time":"2024-05-01T17:40:34.552742921Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263246,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000940323,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:40:34.553048128Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000260206}
{"severity":"debug","time":"2024-05-01T17:40:34.553092729Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.007562281,"xact_id":263246,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:34.553381136Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000255606,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:34.555443186Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001925647,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:34.5560584Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:34.556103502Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:36.545801696Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:36.545852697Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:36.545866998Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:36.545892398Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:36.546259007Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000343108,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:36.546642316Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000326608,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:36.547047026Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000338808,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:36.547914047Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.00079962,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:36.548593363Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000609615,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:36.54931158Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000665516}
{"severity":"debug","time":"2024-05-01T17:40:36.550166901Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.00081102,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:36.550591211Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000380809}
{"severity":"debug","time":"2024-05-01T17:40:36.55138653Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000730717,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1"}
{"severity":"debug","time":"2024-05-01T17:40:36.552257051Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.time":0.00082642,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:40:36.553092871Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000763718,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:36.553747887Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000608615}
{"severity":"debug","time":"2024-05-01T17:40:36.554844713Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263247,"pid":752941,"pgx.severity":"info","pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001054125}
{"severity":"debug","time":"2024-05-01T17:40:36.555298224Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.00040581,"pgx.commandTag":"ROLLBACK"}
{"severity":"debug","time":"2024-05-01T17:40:36.555349425Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.009450126,"xact_id":263247,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:36.555714434Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000331108,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;"}
{"severity":"debug","time":"2024-05-01T17:40:36.557713782Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001883745,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:36.558319696Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:36.558368797Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:38.548485902Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.00208055,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:38.549935937Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000549613,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:38.550011539Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:38.550025739Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:38.55005154Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:38.55007284Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:38.550435049Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000328808}
{"severity":"debug","time":"2024-05-01T17:40:38.550736956Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000264506,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:38.551075064Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000286107,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:38.551868983Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.time":0.000747218,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"]}
{"severity":"debug","time":"2024-05-01T17:40:38.552468998Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000558414,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:38.553195915Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.000680816,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:38.553909832Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.000670316,"pgx.rowCount":4,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:38.554278241Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000327108,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:38.554885356Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000552914}
{"severity":"debug","time":"2024-05-01T17:40:38.555673575Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000746217,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:38.556342391Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.time":0.000627215,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:40:38.556998406Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.time":0.000607914,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:40:38.558043031Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263248,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000998724,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:38.558464941Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000374409,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:38.558510943Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008416102,"xact_id":263248,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:38.558854751Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000312308,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:38.560718696Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001762542,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:38.561410712Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:38.561526615Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:40.550948103Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:40.550997104Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:40.551013505Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:40.551040305Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:40.551343212Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000280506,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:40.551838724Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.00044351}
{"severity":"debug","time":"2024-05-01T17:40:40.552224834Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000328308,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:40.553042253Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000768318,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:40.553567366Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000480812,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:40.554212681Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000597514,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:40.554905298Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000633215,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:40:40.555243906Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000297907,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:40.55584502Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000541713,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1"}
{"severity":"debug","time":"2024-05-01T17:40:40.556561638Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000675016}
{"severity":"debug","time":"2024-05-01T17:40:40.55748176Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000850021,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:40:40.558176176Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000642615,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:40.559316204Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263249,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001096427,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:40.559666512Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000301007}
{"severity":"debug","time":"2024-05-01T17:40:40.559719213Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008672108,"xact_id":263249,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:40.560059721Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000305907,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:40.562052869Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001880545,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:40.562684384Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:40.562736286Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:40.67720883Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["9ffda4c3-80d9-1119-b8bd-6868fc47d5ca"],"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000464911,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;"}
{"severity":"debug","time":"2024-05-01T17:40:42.553077296Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001947747,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:42.554574932Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000511912,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.554654034Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:42.554688034Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:42.554699535Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:42.554719435Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:42.555108244Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000345508,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.555535755Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000337208,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.555912864Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000314208,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp"}
{"severity":"debug","time":"2024-05-01T17:40:42.556872387Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000905522,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.557361898Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.00043941,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.558047115Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000637916}
{"severity":"debug","time":"2024-05-01T17:40:42.558791433Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000698517,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.559266144Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.00043381,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:42.559959661Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.time":0.000645216,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"]}
{"severity":"debug","time":"2024-05-01T17:40:42.560839982Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.time":0.00083802,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:40:42.561562699Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000681416,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.562163414Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000551813,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:42.563246039Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263250,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001038025,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:40:42.563587548Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000291507,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.563637749Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008893113,"xact_id":263250,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:42.563985857Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000312507,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:42.566091908Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001992048,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:42.566668522Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:42.566715323Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:44.555093686Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:44.555142987Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:44.555157187Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:44.555182888Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:44.555497295Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000293207,"pgx.commandTag":"BEGIN"}
{"severity":"debug","time":"2024-05-01T17:40:44.555902105Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000360609,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:44.556195112Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000232906,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:44.557029532Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.args":["default","montage","spec","master"],"pgx.time":0.000781219,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4"}
{"severity":"debug","time":"2024-05-01T17:40:44.557576545Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000505512,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:44.558287262Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.time":0.000665816,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:44.558986079Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000653316}
{"severity":"debug","time":"2024-05-01T17:40:44.559393989Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000366809,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:44.560006704Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000563513,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:44.56071012Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000646515}
{"severity":"debug","time":"2024-05-01T17:40:44.561412537Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000629515,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:40:44.562053153Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000570713}
{"severity":"debug","time":"2024-05-01T17:40:44.563088777Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263251,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.000991823,"pgx.rowCount":10,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:44.563453386Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000319908,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:44.563491987Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008302599,"xact_id":263251,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:44.563941198Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.00041551,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:44.566070749Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001983848,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:44.566588261Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:44.566650463Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:46.557912495Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001912946,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:46.55939163Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000546613,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.559465432Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:46.559479633Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:46.559505133Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:46.559528534Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:46.559897043Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000322008,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.560261351Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000296107}
{"severity":"debug","time":"2024-05-01T17:40:46.560646561Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000323207,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.561355778Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000658915,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.561825489Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000427011,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.562539706Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000655216}
{"severity":"debug","time":"2024-05-01T17:40:46.563250823Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000665616,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.563581031Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000290007,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.564231646Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000586014,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.564913663Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000639216}
{"severity":"debug","time":"2024-05-01T17:40:46.565577979Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.time":0.000623215,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:40:46.566211194Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000582214,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.567183217Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263252,"pid":752941,"pgx.severity":"info","pgx.args":[24,1,10000],"pgx.time":0.000929622,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3"}
{"severity":"debug","time":"2024-05-01T17:40:46.567475324Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000247106,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:46.567521825Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.007966491,"xact_id":263252,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:46.567840133Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.time":0.000284707,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"]}
{"severity":"debug","time":"2024-05-01T17:40:46.569706978Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001762843,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:46.570249591Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:46.570292992Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:48.560319894Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:48.560371296Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:48.560385596Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:48.560411697Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:48.560755705Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000321108}
{"severity":"debug","time":"2024-05-01T17:40:48.561136414Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000337008,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:48.561500723Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000307708,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:48.562261441Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000707917,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:48.562867055Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.000554413,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:48.563602473Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000688517,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:48.564457594Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.00080942,"pgx.rowCount":2}
{"severity":"debug","time":"2024-05-01T17:40:48.564878504Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000362208,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:48.565646722Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000717017,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:48.56638514Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.000694717,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1"}
{"severity":"debug","time":"2024-05-01T17:40:48.567067256Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.time":0.000607115,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:40:48.56766477Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000552113,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:48.568745196Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263253,"pid":752941,"pgx.severity":"info","pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[6,1,10000],"pgx.time":0.001036825}
{"severity":"debug","time":"2024-05-01T17:40:48.569101005Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000306808,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:48.569140606Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008721709,"xact_id":263253,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:48.569521715Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000346508,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:48.571599765Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001955247,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:48.572201679Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:48.57224988Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:50.562905398Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002176152,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:50.564368833Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000516712,"pgx.rowCount":4}
{"severity":"debug","time":"2024-05-01T17:40:50.564457135Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:50.564472236Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:50.564480336Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:50.564498836Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:50.564798643Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000257906,"pgx.commandTag":"BEGIN"}
{"severity":"debug","time":"2024-05-01T17:40:50.565156152Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000305007,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:50.565569762Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000340408}
{"severity":"debug","time":"2024-05-01T17:40:50.566293079Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000669916,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:50.566797991Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000461311,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:50.567487508Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.time":0.000645816,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000]}
{"severity":"debug","time":"2024-05-01T17:40:50.56839523Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000854121,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:50.568781639Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000343608,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:50.569444055Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000590914,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:50.570197873Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000713717}
{"severity":"debug","time":"2024-05-01T17:40:50.571060694Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.args":[24],"pgx.time":0.000817919,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:40:50.571702409Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000589014,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:50.572907138Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263254,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.001160428,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:50.573257446Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000301307,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:50.573312648Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008789211,"xact_id":263254,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:50.573733758Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000374509,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:50.575680304Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001828144,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:50.576250018Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:50.576295719Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:50.679311788Z","logger":"serviceenv.identity.dex.serve.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"7bac27aa-6538-20e2-b362-ad7c71e14c62","x-request-id":["bad02cf7-c17c-193b-97b6-0c2a33c3b60a"],"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT issuer, id_token_expiry AS idtokenexpiry, rotation_token_expiry AS rotationtokenexpiry FROM identity.config WHERE id=$1;","pgx.args":[1],"pgx.time":0.000474311,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:52.565523103Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:52.565581504Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:52.565596604Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:52.565621405Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:52.565929112Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000285007,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:52.566369823Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.args":[],"pgx.time":0.00039731,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()"}
{"severity":"debug","time":"2024-05-01T17:40:52.566730331Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.args":[],"pgx.time":0.000303907,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp"}
{"severity":"debug","time":"2024-05-01T17:40:52.567530451Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000743018,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:52.568005762Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.00043371,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:52.568704579Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000653416,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:52.569375395Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000625415,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:52.569815805Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000399709,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:52.570448621Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000584614,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1"}
{"severity":"debug","time":"2024-05-01T17:40:52.571164138Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000672817,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:52.572054759Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.args":[6],"pgx.time":0.00082142,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1"}
{"severity":"debug","time":"2024-05-01T17:40:52.572763476Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000662316,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:52.573898703Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263255,"pid":752941,"pgx.severity":"info","pgx.args":[6,1,10000],"pgx.time":0.001092126,"pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3"}
{"severity":"debug","time":"2024-05-01T17:40:52.574253312Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000308108,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:52.574291013Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.008662008,"xact_id":263255,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:52.574648521Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000314007}
{"severity":"debug","time":"2024-05-01T17:40:52.576618168Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001865844,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:52.577187782Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:52.577235483Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:54.56870042Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.002033848,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:54.570171856Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000504612,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:54.570248057Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:54.570261758Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:54.570268558Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:54.570285758Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:54.570514064Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000195905,"pgx.commandTag":"BEGIN"}
{"severity":"debug","time":"2024-05-01T17:40:54.57078917Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000239105,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:54.571129779Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000261306,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:54.571886497Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000666216,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:54.572405709Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[1],"pgx.time":0.000459111,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:54.573068225Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.args":[1,1000,10000],"pgx.time":0.000618615,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:40:54.573827643Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000712717,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:54.574229053Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000356809}
{"severity":"debug","time":"2024-05-01T17:40:54.575116774Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.00083772,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:54.576148299Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000989524}
{"severity":"debug","time":"2024-05-01T17:40:54.576895317Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24],"pgx.time":0.000706517,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:54.577738537Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000795419,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:54.578828563Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263256,"pid":752941,"pgx.severity":"info","pgx.args":[24,1,10000],"pgx.time":0.001046825,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3"}
{"severity":"debug","time":"2024-05-01T17:40:54.579252173Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000372009,"pgx.commandTag":"ROLLBACK"}
{"severity":"debug","time":"2024-05-01T17:40:54.579300474Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008991815,"xact_id":263256,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:54.579680684Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000347508,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:54.581711532Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001914246,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:54.582239645Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:54.582282646Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:56.570729011Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:56.570782712Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:56.570799712Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:56.570826213Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:56.571165021Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000315908,"pgx.commandTag":"BEGIN","pgx.pid":164658843,"pgx.sql":"begin isolation level serializable","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:56.571598832Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000355109,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:56.571891639Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.time":0.000227705,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:56.572627856Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.time":0.000687716,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"]}
{"severity":"debug","time":"2024-05-01T17:40:56.573069967Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.00039971,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:56.573779284Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000667216,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:56.574441Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000618115,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:56.574821709Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000326607,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:56.575962236Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.time":0.000996924,"pgx.rowCount":1,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"]}
{"severity":"debug","time":"2024-05-01T17:40:56.576793056Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.time":0.000766019,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6]}
{"severity":"debug","time":"2024-05-01T17:40:56.577657777Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000775419,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:40:56.578392194Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6],"pgx.time":0.000684716,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:56.579492321Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263257,"pid":752941,"pgx.severity":"info","pgx.args":[6,1,10000],"pgx.time":0.001049125,"pgx.rowCount":10,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3"}
{"severity":"debug","time":"2024-05-01T17:40:56.57985963Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.time":0.000319507,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843,"pgx.sql":"rollback","pgx.args":[]}
{"severity":"debug","time":"2024-05-01T17:40:56.579898831Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"spanDuration":0.009065217,"xact_id":263257,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:56.580272539Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/montage@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000340208,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:40:56.582327289Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dmontage%2CpipelineProject%3Ddefault","duration":0.001928947,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:56.582907903Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:40:56.582949104Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","scale":1}
{"severity":"debug","time":"2024-05-01T17:40:58.572816002Z","logger":"serviceenv.PPS.master.pollPipelines.outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=suite%3Dpachyderm%2CpipelineName","duration":0.001773742,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:58.57436564Z","logger":"serviceenv.PPS.master.pollPipelines.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pgx.severity":"info","pgx.sql":"select key, createdat, updatedat, proto from collections.pipelines order by createdat desc, key asc limit 1000","pgx.args":[],"pgx.time":0.000555613,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.574452142Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:58.574466542Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:58.574494743Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:58.574516643Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:40:58.574858251Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000307007,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.575196459Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000278706,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.575532268Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000280606,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.576306186Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","edges","spec","master"],"pgx.time":0.000726917,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.576800698Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.args":[1],"pgx.time":0.000450911,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t"}
{"severity":"debug","time":"2024-05-01T17:40:58.577515715Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000663916,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.578294134Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[1,1000,10000],"pgx.time":0.000703817,"pgx.rowCount":4,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.578688043Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[1],"pgx.time":0.000337508,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.579304758Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/edges.spec@67ac260d8356416ca405a16285330810"],"pgx.time":0.000564114,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.580256081Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[24],"pgx.time":0.000900122,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.581102101Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.time":0.000794319,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[24]}
{"severity":"debug","time":"2024-05-01T17:40:58.581797918Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[24],"pgx.time":0.000641416,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.582795542Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"xact_id":263258,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.commit_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT cp.from_id, cp.to_id, depth+1\n\t\t    FROM subv s\n\t\t    JOIN pfs.commit_provenance cp ON s.from_id = cp.to_id\n\t\t\tWHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name \n\t\tFROM subv s\n\t\tJOIN pfs.commits commit ON s.from_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tGROUP BY \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id,\n\t\trepo.name,\n\t\trepo.type,\n\t\tproject.name,\n\t\tbranch.name\n\t\tORDER BY MIN(depth) ASC\n        LIMIT $3","pgx.args":[24,1,10000],"pgx.time":0.000952823,"pgx.rowCount":2,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.583105649Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"pgx.severity":"info","pgx.sql":"rollback","pgx.args":[],"pgx.time":0.000265806,"pgx.commandTag":"ROLLBACK","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.58315105Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).WithReadContext.WithTx","caller":"dbutil/tx.go:163","message":"WithTx: span finished ok","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","tx_attempt":0,"spanDuration":0.008608606,"xact_id":263258,"pid":752941}
{"severity":"debug","time":"2024-05-01T17:40:58.583499759Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","pgx.severity":"info","pgx.sql":"select proto, updatedat from collections.pipelines where key = $1;","pgx.args":["default/edges@67ac260d8356416ca405a16285330810"],"pgx.time":0.000315507,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:40:58.5852271Z","logger":"serviceenv.PPS.master.pipelineController(default/edges).outgoingHttp","caller":"promutil/promutil.go:69","message":"outgoing http request complete","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","name":"kubernetes","method":"GET","uri":"https://10.96.0.1:443/api/v1/namespaces/default/replicationcontrollers?labelSelector=pipelineName%3Dedges%2CpipelineProject%3Ddefault","duration":0.001613939,"status":"200 OK"}
{"severity":"debug","time":"2024-05-01T17:40:58.585799814Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:592","message":"ensuring correct k8s resources","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges"}
{"severity":"debug","time":"2024-05-01T17:40:58.585848115Z","logger":"serviceenv.PPS.master.pipelineController(default/edges)","caller":"server/pipeline_controller.go:660","message":"pipeline is at desired scale","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/edges","scale":1}
{"severity":"debug","time":"2024-05-01T17:41:00.574779191Z","logger":"serviceenv.PPS.master.pollPipelines","caller":"server/poller.go:157","message":"polling pipeline","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:41:00.574828692Z","logger":"serviceenv.PPS.master","caller":"server/master.go:207","message":"pipelineEvent","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:41:00.574843193Z","logger":"serviceenv.PPS.master.pipelineController(default/montage)","caller":"server/pipeline_controller.go:320","message":"processing event","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage"}
{"severity":"debug","time":"2024-05-01T17:41:00.574867893Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx","caller":"dbutil/tx.go:153","message":"WithTx: span start","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0}
{"severity":"debug","time":"2024-05-01T17:41:00.575223102Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Exec","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"begin isolation level serializable","pgx.args":[],"pgx.time":0.000333808,"pgx.commandTag":"BEGIN","pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:41:00.575538509Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"pgx.severity":"info","pgx.sql":"select pg_current_xact_id(), pg_backend_pid()","pgx.args":[],"pgx.time":0.000272706,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:41:00.575840317Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.sql":"select CURRENT_TIMESTAMP as Timestamp","pgx.args":[],"pgx.time":0.000221606,"pgx.rowCount":1,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:41:00.576543833Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\tbranch.created_at,\n\t\t\tbranch.updated_at,\n\t\t\tbranch.metadata,\n\t\t\trepo.id as \"repo.id\",\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.id as \"repo.project.id\",\n\t\t\tproject.name as \"repo.project.name\",\n\t\t\tcommit.commit_id as \"head.commit_id\",\n\t\t\tcommit.commit_set_id as \"head.commit_set_id\",\n\t\t\theadBranch.name as \"head.branch_name\",\n\t\t\trepo.name as \"head.repo.name\",\n\t\t\trepo.type as \"head.repo.type\",\n\t\t\tproject.name as \"head.repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\t\tJOIN pfs.commits commit ON branch.head = commit.int_id\n\t\t\tLEFT JOIN pfs.branches headBranch on commit.branch_id = headBranch.id\n\t WHERE project.name = $1 AND repo.name = $2 AND repo.type = $3 AND branch.name = $4","pgx.args":["default","montage","spec","master"],"pgx.time":0.000650815,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:41:00.577001244Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branch_provenance bp\n\t\t    JOIN pfs.branches branch ON bp.to_id = branch.id\n\t\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tWHERE bp.from_id = $1\n\t","pgx.args":[6],"pgx.time":0.00041121,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:41:00.577756963Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE prov(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE from_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM prov JOIN pfs.branch_provenance bp ON prov.to_id = bp.from_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN prov p ON branch.id = p.to_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;","pgx.args":[6,1000,10000],"pgx.time":0.000685716,"pgx.rowCount":0}
{"severity":"debug","time":"2024-05-01T17:41:00.578455379Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.args":[6,1000,10000],"pgx.time":0.000649115,"pgx.rowCount":2,"pgx.pid":164658843,"pgx.sql":"\n\t\tWITH RECURSIVE subv(from_id, to_id) AS (\n\t\t    SELECT from_id, to_id, 1 as depth\n\t\t    FROM pfs.branch_provenance\n\t\t    WHERE to_id = $1\n\t\tUNION ALL\n\t\t    SELECT DISTINCT bp.from_id, bp.to_id, depth+1\n\t\t    FROM subv JOIN pfs.branch_provenance bp ON subv.from_id = bp.to_id\n\t\t    WHERE depth < $2\n\t\t)\n\t\tSELECT\n\t\t    branch.id,\n\t\t\tbranch.name,\n\t\t\trepo.name as \"repo.name\",\n\t\t\trepo.type as \"repo.type\",\n\t\t\tproject.name as \"repo.project.name\"\n\t\tFROM pfs.branches branch\n\t\tJOIN subv s ON branch.id = s.from_id\n\t\tJOIN pfs.repos repo ON branch.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tGROUP BY branch.id, branch.name, repo.name, repo.type, project.name\n\t\tORDER BY MIN(depth) ASC LIMIT $3;"}
{"severity":"debug","time":"2024-05-01T17:41:00.578798588Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.sql":"\n\t\tSELECT\n\t\t\tbranch.name as \"to_branch.name\",\n\t\t\tcron_spec,\n\t\t\trate_limit_spec,\n\t\t\tsize,\n\t\t\tnum_commits,\n\t\t\tall_conditions\n\t\tFROM pfs.branch_triggers trigger\n\t\t\tJOIN pfs.branches branch ON trigger.to_branch_id = branch.id\n\t\tWHERE trigger.from_branch_id = $1\n\t","pgx.args":[6],"pgx.time":0.000290407,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:41:00.579392102Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.pid":164658843,"pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id WHERE commit_id=$1","pgx.args":["default/montage.spec@5a10d87afdf84803bafc039efa400d58"],"pgx.time":0.000547613,"pgx.rowCount":1}
{"severity":"debug","time":"2024-05-01T17:41:00.580110119Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.parent = commit.int_id WHERE ancestry.child=$1","pgx.args":[6],"pgx.time":0.000676516,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:41:00.581037441Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.sql":"SELECT DISTINCT \n\t\tcommit.int_id,\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\tcommit.branch_id,\n\t\tcommit.origin,\n\t\tcommit.description,\n\t\tcommit.start_time,\n\t\tcommit.finishing_time,\n\t\tcommit.finished_time,\n\t\tcommit.compacting_time_s,\n\t\tcommit.validating_time_s,\n\t\tcommit.error,\n\t\tcommit.size,\n\t\tcommit.created_at,\n\t\tcommit.updated_at,\n\t\tcommit.metadata,\n\t\tcommit.repo_id AS \"repo.id\",\n\t\trepo.name AS \"repo.name\",\n\t\trepo.type AS \"repo.type\",\n\t\tproject.name AS \"repo.project.name\",\n\t\tbranch.name as branch_name\n\t\tFROM pfs.commits commit\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\t\tJOIN pfs.commit_ancestry ancestry ON ancestry.child = commit.int_id WHERE ancestry.parent=$1","pgx.args":[6],"pgx.time":0.000861721,"pgx.rowCount":0,"pgx.pid":164658843}
{"severity":"debug","time":"2024-05-01T17:41:00.58182086Z","logger":"serviceenv.PPS.master.pipelineController(default/montage).WithReadContext.WithTx.pgx.bouncer","caller":"gazelle~~go_deps~com_github_jackc_pgx_v4/conn.go:354","message":"Query","server-id":"c87cb117-770b-223f-b6f6-b7a3878c0162","user":"internal:pps-master","withLock":"pachyderm/1.7.0/pachyderm_pps/_master_lock","locked":true,"pipeline":"default/montage","tx_attempt":0,"xact_id":263259,"pid":752941,"pgx.severity":"info","pgx.time":0.000724218,"pgx.rowCount":0,"pgx.pid":164658843,"pgx.sql":"\n\tSELECT DISTINCT\n\t\tcommit.commit_id,\n\t\tcommit.commit_set_id,\n\t\trepo.name as \"repo.name\",\n\t\trepo.type as \"repo.type\",\n\t\tproject.name as \"repo.project.name\",\n\t\tbranch.name as branch_name\n\tFROM pfs.commit_provenance prov\n\t\tJOIN pfs.commits commit ON prov.to_id = commit.int_id\n\t\tJOIN pfs.repos repo ON commit.repo_id = repo.id\n\t\tJOIN core.projects project ON repo.project_id = project.id\n\t\tLEFT JOIN pfs.branches branch ON commit.branch_id = branch.id\n\tWHERE prov.from_id = $1\t\n\t","pgx.args":[6]}
