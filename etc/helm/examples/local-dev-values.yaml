# SPDX-FileCopyrightText: Pachyderm, Inc. <info@pachyderm.com>
# SPDX-License-Identifier: Apache-2.0
deployTarget: LOCAL

pachd:
  image:
    tag: local
  resources:
    requests:
      cpu: 250m
      memory: 512M
  service:
    type: NodePort
  metrics:
    enabled: false
  clusterDeploymentID: dev
  ## if pachd.enterpriseLicenseKey is set, the following values will be interpreted to setup Auth
  # enterpriseLicenseKey: ""
  oauthClientId: "pachd"
  oauthIssuer: "http://pachd:1658"
  oauthRedirectURI: "http://localhost:30657/authorization-code/callback"
  ## if a secret is not provided, a secret will be autogenerated on install and stored in the k8s secret 'pachyderm-bootstrap-config.authConfig.clientSecret'
  oauthClientSecret: ""
  ## if a secret is not provided, a secret will be autogenerated on install and stored in the k8s secret 'pachyderm-bootstrap-config.enterpriseSecret'
  enterpriseSecret: ""
  ## if a token is not provided, a secret will be autogenerated on install and stored in the k8s secret 'pachyderm-bootstrap-config.rootToken'
  rootToken: ""
  ## userAccessibleOauthIssuerHost is necessary in localhost settings or anytime the registered Issuer address isn't accessible outside the cluster
  userAccessibleOauthIssuerHost: "localhost:30658"
  mockIDP: true
  ## to set up upstream IDPs, set pachd.mockIDP to false,
  ## and populate the pachd.upstreamIDPs with an array of Dex Connector configurations.
  ## See the example below or https://dexidp.io/docs/connectors/
  # upstreamIDPs:
  #   - id: idpConnector
  #     jsonConfig: >-
  #       {
  #           "issuer": "",
  #           "clientID": "",
  #           "clientSecret": "",
  #           "redirectURI": "http://localhost:30658/callback",
  #           "insecureEnableGroups": true,
  #           "insecureSkipEmailVerified": true,
  #           "insecureSkipIssuerCallbackDomainCheck": true,
  #           "forwardedLoginParams": ["login_hint"]
  #       }
  #     name: idpConnector
  #     type: oidc

console:
  enabled: false
  config:
    issuerURI: "http://pachd:1658"
    oauthRedirectURI: "http://localhost:4000/oauth/callback/?inline=true"
    reactAppRuntimeIssuerURI: "http://localhost:30658"
    oauthClientID: "dash"
    oauthClientSecret: "notsecret"
    graphqlPort: 4000
    oauthPachdClientID: "pachd"
    pachdAddress: "pachd-peer.default.svc.cluster.local:30653"

enterpriseServer:
  enabled: false

etcd:
  service:
    type: NodePort

postgresql:
  service:
    type: NodePort
